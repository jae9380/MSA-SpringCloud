# Section 1

<details>
<summary>part 1 / Erueka μ„λ²„ ν”„λ΅μ νΈ μƒμ„±</summary>
<div markdown="1">

## Created erueka server project

`@EnableEurekaServer`
μ„ μ–Έλ μ–΄ν”λ¦¬μΌ€μ΄μ…μ„ Eureka μ„λ²„λ΅ μ„¤μ •ν•  λ• μ‚¬μ©  
ν•΄λ‹Ή μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ©΄, ν•΄λ‹Ή μ• ν”λ¦¬μΌ€μ΄μ…μ€ Eureka μ„λ²„λ΅μ„ λ™μ‘ν•λ‹¤.
Eureka μ„λ²„λ” λ‹¤λ¥Έ λ§μ΄ν¬λ΅μ„λΉ„μ¤ μΈμ¤ν„΄μ¤μ λ“±λ΅κ³Ό λ””μ¤μ»¤λ²„λ¦¬λ¥Ό κ΄€λ¦¬λ¥Ό ν•λ‹¤.

```yaml
eureka:
  client:
    register-with-eureka: false # or true
    fetch-registry: false # or true
```

`register-with-eureka`
μΌλ°μ μΌλ΅ Eureka μ„λ²„ μμ²΄λ¥Ό μ„¤μ •ν•  λ• μ‚¬μ©μ„ ν•λ‹¤.  
Eureka μ„λ²„λ” λ‹¤λ¥Έ λ§μ΄ν¬λ΅μ„λΉ„μ¤ μΈμ¤ν„΄μ¤λ¥Ό κ΄€λ¦¬ν•κ³  λ“±λ΅ν•κΈ° λ•λ¬Έμ— μ§€κΈ ν”„λ΅μ νΈλ” μ„λ²„ μμ²΄κ°€ λ‹¤μ‹ μκΈ° μμ‹ μ—κ² λ“±λ΅λ  ν•„μ”κ°€ μ—†κΈ°μ— `false`λ΅ μ„¤μ •

`fetch-registry`
Eureka μ„λ²„λ¥Ό μ„¤μ •ν•  λ• μ£Όλ΅ μ‚¬μ©λ©λ‹λ‹¤.  
Eureka μ„λ²„λ” μμ‹ μ΄ λ“±λ΅λ μΈμ¤ν„΄μ¤ μ •λ³΄λ¥Ό κ°€μ§€κ³  μμ–΄μ•Ό ν•λ©°, λ‹¤λ¥Έ μ„λ²„λ΅λ¶€ν„° μ •λ³΄λ¥Ό κ°€μ Έμ¬ ν•„μ”κ°€ μ—†κΈ° λ•λ¬Έμ— `false`λ΅ μ„¤μ •μ„ ν•¨

## μ‹¤ν–‰ ν™”λ©΄

![](https://i.postimg.cc/KjVShF6G/2024-07-23-18-24-55.png)

---

</div>
</details>

<details>
<summary>part 2 / Erueka ν΄λΌμ΄μ–ΈνΈ ν”„λ΅μ νΈ μƒμ„±</summary>
<div markdown="1">

## Created eureka client project

[user-service ν”„λ΅μ νΈ μƒμ„±](https://github.com/jae9380/user-service)  
ν•΄λ‹Ή ν”„λ΅μ νΈλ” Eureka μ„λ²„μ— λ“±λ΅ ν•  ν΄λΌμ΄μ–ΈνΈ ν”„λ΅μ νΈμ΄κΈ° λ•λ¬Έμ— part 1 μ— ymlμ„¤μ • λ¶€λ¶„μ—μ„ Eureka μ„¤μ • κ°’μ„ false π‘‰true λ³€κ²½ν•μ—¬ μ‘μ„±  
κ·Έλ¦¬κ³  urlμ¶”κ°€λ¥Ό μ„ν•΄μ„ μ‘μ„±

```yaml
service-url:
  defaultZone: http://127.0.0.1:8761/eureka
```

ν΄λΌμ΄μ–ΈνΈ ν”„λ΅μ νΈ λ¶€λ¶„μ— `@EnableDiscoveryClient` μ¶”κ°€

μ΄ν›„ μ„λ²„ ν”„λ΅μ νΈμ™€ ν΄λΌμ΄μ–ΈνΈ ν”„λ΅μ νΈλ¥Ό μ‹¤ν–‰ν•μ—¬ μ„λ²„μ— μ ‘μ†μ„ ν•λ©΄

![](https://i.postimg.cc/sfWyWHZt/2024-07-23-19-17-20.png)

μ„μ™€ κ°™μ΄ μ„λ²„μ— ν΄λΌμ΄μ–ΈνΈκ°€ μ¶”κ°€λ λ§μ„ ν™•μΈν•  μ μλ‹¤.

---

</div>
</details>

<details>
<summary>part 3 /  ν΄λΌμ΄μ–ΈνΈ ν”„λ΅μ νΈ μ‹¤ν–‰ </summary>
<div markdown="1">

## Porject testing

ν΄λΌμ΄μ–ΈνΈ ν”„λ΅μ νΈ 3κ° μ‹¤ν–‰μ‹ν‚¤κΈ°
ν¬νΈλ²νΈλ¥Ό κ° 1, 2, 3μΌλ΅ μ„¤μ •
(3λ²μ κ²½μ°, ν„°λ―Έλ„μ—μ„ μ•„λ λ…λ Ήμ–΄ μ…λ ¥)

```cmd
mvn spring-boot:run -Dspring-boot.run.jvmArguments='-Dserver.port=9003'
```

![](https://ifh.cc/g/NzsrA9.jpg)
ν΄λΌμ΄μ–ΈνΈ 3κ°κ°€ μ΅ν€μλ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

μ¶”κ°€μ μΌλ΅ ν•λ‚ λ” μ‹¤ν–‰μ„ ν•κ² λ‹¤.

μ΄λ²μ—λ” λ°”νƒ•ν™”λ©΄μ—μ„ ν„°λ―Έλ„μ„ μ΄μ©μ„ ν•λ‹¤.
`cd` λ…λ Ήμ–΄λ¥Ό μ…λ ¥ν•μ—¬ ν”„λ΅μ νΈκ°€ μλ” μ„μΉλ΅ μ΄λ™ ν›„

```cmd
java -jar -Dserver.port=9004 ./target/user-service-0.0.1-SNAPSHOT.jar
```

</div>
</details>

<details>
<summary>part 4 / ν¬νΈ κ΄€λ ¨ μ„¤μ •</summary>
<div markdown="1">

## YML file configuration for setting the port number of the client project

κΈ°μ΅΄μ ν΄λΌμ΄μ–ΈνΈμ `application.yml`νμΌμ—μ„ μ„λ²„ ν¬νΈλ¥Ό μ§€μ •μ„ ν–μ„ λ•
ν•΄λ‹Ή ν”„λ΅μ νΈλ¥Ό μ¤‘λ³µ μ‹¤ν–‰μ„ μ„ν•΄μ„ μ§μ ‘ ν¬νΈλ¥Ό λ‹¤λ¥Έ κ°’μΌλ΅ μ§€μ •μ„ ν•μ€λ‹¤.
ν•μ§€λ§ μ΄λ¬ν• λ°©λ²•μ€ ν¨μ¨μ μ΄μ§€ λ» ν•λ‹¤.

κ·Έλμ„ ν¬νΈμ κ°’μ„

```yaml
server:
  port: 0

eureka:
  instance:
    instance-id: ${spring.cloud.client.hostname}:${spring.application.instance_id:${random.value}}
```

λ³€κ²½ν•μ—¬ ν¬νΈ λ²νΈλ¥Ό λλ¤μΌλ΅ μ§€μ •ν•λ” λ°©λ²•μΌλ΅ μμ •

![](https://i.postimg.cc/cLxndydV/2024-07-26-132353.png)
![](https://i.postimg.cc/N0L2r69D/2024-07-26-133542.png)
![](https://i.postimg.cc/g05Xyx3W/2024-07-26-133603.png)

[URL of the commit for the client project](https://github.com/jae9380/user-service/commit/e8ce0d8fb1ef0df3f89339ce1dab67ff9453e14d)

</div>
</details>

# section 2

<details>
<summary>part 1 / API Gateway, Netflix Ribbon </summary>
<div markdown="1">

## Role of API Gateway Service

ν•΄λ‹Ή μ„λΉ„μ¤λ” μ‚¬μ©μκ°€ μ •μν• λΌμ°ν… μ„¤μ •μ— λ”°λΌμ„ κ°κ°μ μ—”νΈν¬μΈνΈλ΅ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ€μ‹ ν•μ—¬ μ”μ²­ν•κ³  μ‘λ‹Ήμ„ λ°›μΌλ©° λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈν•ν… μ „λ‹¬ν•΄μ£Όλ” ν”„λ΅μ‹ μ—­ν™μ„ ν•κ²λλ‹¤.

μ‹μ¤ν… λ‚΄λ¶€ κµ¬μ΅°λ” μ¨κΈ°κ³  μ™Έλ¶€μ μ”μ²­μ— λ€ν•μ—¬ μ μ ν• ν•νƒλ΅ μ‘λ‹µμ„ ν•λ„λ΅ ν•λ‹¤λ” μ¥μ μ΄ μλ‹¤.

![](https://i.postimg.cc/26m9zyQx/APIGateway2.png)

λ§μ΄ν¬λ΅ μ„λΉ„μ¤κ°€ 3κ°€μ§€ μλ‹¤κ³  κ°€μ •μ„ ν•μ.

κΈ°μ΅΄μ—λ” λ¨λ°”μΌλ‚ μ›Ήμ΄κ±°λ‚ ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ£Όμ†λ¥Ό μ§μ ‘ μ΄μ©ν•΄μ„ νλ¦¬λ―Έν„°λ¥Ό μ „λ‹¬ν•κ³  μ”μ²­ν•λ” κ²ƒμΌλ΅ λ³Ό μ μλ‹¤. μ—¬κΈ°μ„ ν•λ‚μ μ„λΉ„μ¤κ°€ μ¶”κ°€λκ±°λ‚, κΈ°μ΅΄ μ„λΉ„μ¤μ μ£Όμ„κ°€ λ³€κ²½ λκ±°λ‚ λ“± μΌμ΄ μ–Όμ–΄λ‚¬μ„ λ• λ§μ΄ν¬λ΅ μ„λΉ„μ¤κ°€ λ…λ¦½μ μΌλ΅ λΉλ“μ™€ λ°°ν¬κ°€ λλ‹¤. κ·Έλ¬λ©΄ λ¬Έμ λ” ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ λ°μƒν•λ‹¤.

ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ μ§μ ‘μ μΌλ΅ μ—”νΈν¬μΈνΈλ¥Ό μ΄μ©ν•΄μ„ νΈμ¶ν–μ„ κ²½μ°μ—λ” ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ— μλ” μ–΄ν”λ¦¬μΌ€μ΄μ… λν• κ°™μ΄ μμ •, λ°°ν¬λ¥Ό ν•΄μ¤μ•Ό ν•λ‹¤.

μ΄λ ‡κ² λ‹¨μΌ μ§„μ…μ μ„ κ°–κ³  μλ” ν•νƒλ΅μ κ°λ°μ΄ ν•„μ”ν•κ² λμ—λ‹¤.

![](https://i.postimg.cc/2yGspvgv/APIGateway.png)

μ„ μ²λΌ μ„λ²„μ— Gatewayμ—­ν™μ„ μν–‰μ„ ν•  μ§„μ…μ μ„ ν•λ‚ λ‘κ³  κ°κ°μ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ΅ μ”μ²­λλ” λ¨λ“  μ •λ³΄μ— λ€ν•μ—¬ μΌκ΄„μ μΌλ΅ μ²λ¦¬ν•  μ μκ² λ§λ“¤μ–΄ μ¤€λ‹¤.

μ–΄λ–¤ λ°©μ‹μ— μμ–΄μ„ μ§μ ‘μ μΌλ΅ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ¥Ό νΈμ¶ν•μ§€ μ•κ³ , ν΄λΌμ΄μ–ΈνΈλ” Gatewayλ§μ„ μƒλ€ν•κ² ν•λ‹¤.

μ΄λ¬ν• `API Gateway`λ¥Ό μ΄μ©ν•κ² λλ‹¤λ©΄

- μΈμ¦ λ° κ¶ν• λ¶€μ—¬μ— λ€ν• λ‹¨μΌ μ‘μ—… κ°€λ¥
- λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ κ²€μƒ‰μ„ ν†µν•©
- μ‘λ‹µν•  μ μλ” μΊμ‹± μ •λ³΄λ¥Ό μ €μ¥
- μ •μ±…, νλ΅ μ°¨λ‹¨κΈ° λ° Qos λ‹¤μ‹ μ‹λ„
- μ†λ„ μ ν•κ³Ό λ΅λ“λ°Έλ°μ‹±
- λ¶€ν• λ¶„μ‚°
- λ΅κΉ…, μ¶”μ , μƒκ΄€κ΄€κ³„
- ν—¤λ”, μΏΌλ¦¬λ¬Έ λ¬Έμμ—΄ λ° μ²­κµ¬ λ°ν™
- IPμ— λ€ν•μ—¬ ν—μ©, μ°¨λ‹¨ λ©λ΅ κ΄€λ¦¬

## Netflix Ribbon

μ¤ν”„λ§ ν΄λΌμ°λ“μ—μ„ λ§μ΄ν¬λ΅ μ„λΉ„μ¤κ°„μ ν†µμ‹ , ν•λ‚μ λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ—μ„ λ‹¤λ¥Έ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ¥Ό νΈμ¶ν•κΈ° μ„ν• λ°©λ²• μ¤‘ λ€ν‘μ μΈ λ°©λ²•μ€ `Rest Template`μ™€ `Feign Client`κ°€ μλ‹¤.

- Rest Template
  `Rest Template`μ€ μ „ν†µμ μΌλ΅ ν•λ‚μ μ›Ή μ–΄ν”λ¦¬μΌ€μ΄μ…μ—μ„ λ‹¤λ¥Έ μ–΄ν”λ¦¬μΌ€μ΄μ…μ„ μ΄μ©ν•κΈ° μ„ν•΄μ„ μ‚¬μ©ν• λ°©λ²•μ΄λ‹¤.

```java
RestTemplate restTemplate = new RestTemplate();
restTemplate.getForObject(http://localhost:8080/",User.class,200);
```

- Feign Client
  μ¤ν”„λ§ ν΄λΌμ°λ“μ—μ„λ” `Feign Client`λΌλ” APIλ¥Ό μ΄μ©ν•μ—¬ νΈμ¶μ΄ κ°€λ¥ν•λ‹¤.

```java
@FeignClient("stores")
public interface StoreClient {
  @RequestMapping(method = RequestMethod.GET, value="/stores")
  List<Store> getStores();
}
```

μ„ μ²λΌ νΉμ •ν• μΈν„°νμ΄μ¤λ¥Ό μƒμ„±μ„ ν•κ³ , μ›ΉμΌλ΅ λ”°λ΅ νΈμ¶ν•κ³  μ‹¶μ€ μ¶”κ°€μ μΈ λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ΄λ¦„μ„ λ“±λ΅μ„ ν•λ‹¤.

μ§μ ‘μ μΈ μ„λ²„μ μ£Όμ†, ν¬νΈ λ²νΈ μ—†μ΄ λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ΄λ¦„μ„ κ°–κ³  νΈμ¶ν•  μ μκ²λλ‹¤.

μ΄λ¬ν• λ°©λ²•μΌλ΅ μ¤ν”„λ§ ν΄λΌμ°λ“μ—μ„ λ§μ΄ν¬λ΅ μ„λΉ„μ¤ κ°„μ νΈμ¶μ„ λ‹΄λ‹΄ν–λ”λ°, λ¬Έμ λ” λ΅λ“ λ°λμ„λ¥Ό ν•κΈ° μ„ν•΄μ„ μ–΄λ””μ— κµ¬μ¶•ν•΄μ„ μ‘μ—…μ„ ν•  κ²ƒμΈκ°€κ°€ λ¬Έμ μ΄λ‹¤.
μ΄κΈ° μ¤ν”„λ§ ν΄λΌμ°λ“μ—μ„λ” μ΄λ¬ν• λ΅λ“ λ°λμ„μ μ—­ν™•μ„ λ‹΄λ‹Ήν•λ” λ³„λ„μ μ„λΉ„μ¤ ν”„λ΅μ νΈλ¥Ό μ„ν•΄ Ribbonμ΄λΌλ” μ„λΉ„μ¤λ¥Ό μ κ³µν•κΈ° μ‹μ‘ν–λ‹¤.

> Ribbon : Client side Load Balancer

κ·Έλ°λ° λ¦¬λ³Έμ΄λΌλ” λ°©μ‹μ€ μµκ·Ό `functional API` λλ” `React JAVA`λΌκ³  ν•λ” λ°©μ‹κ³Όλ” νΈν™μ΄ λ§μ΄ μ•λλ” λ°©μ‹ μ¦‰, λΉ„λ™κΈ°κ°€ μ²λ¦¬κ°€ μ λμ§€ μ•λ” λ°©μ‹μ΄κΈ° λ•λ¬Έμ— μµκ·Όμ— μ΄λ¬ν• λ°©μ‹μ„ μ‚¬μ©ν•μ§€ μ•λ”λ‹¤.

κ·Έλ¦¬κ³  `Health Check`λΌκ³  ν•΄μ„ ν•΄λ‹Ήν•λ” μ„λΉ„μ¤κ°€ μ •μ‚­μ μΈ λ™μ‘μ„ ν•λ”μ§€ ν™•μΈν•  μ μλ‹¤.

λ§μ΄ν¬λ΅ μ„λΉ„μ¤ 4κ°€μ§€κ°€ μλ‹¤κ³  ν–μ„ λ•, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λΉ„μ¤ μ‚¬μ΄μ— `API Gateway`λ¥Ό μ¤‘κ°„μ— λ‘κ³  λ™μ‘μ„ ν•΄μ•Όν•λ”λ° μ΄λ¬ν• κµ¬μ΅°κ°€ μ•„λ‹ ν΄λΌμ΄μ–ΈνΈ λ‚΄λ¶€μ— `Ribbon`μ΄λΌλ” μ„λΉ„μ¤λ¥Ό κµ¬μ¶•ν•μ—¬ μ‚¬μ©μ„ ν•κΈ° μ‹μ‘ν–λ‹¤. (Client Sideμ— μ„μΉν•κ³  μλ‹¤.)

![](https://i.postimg.cc/9f7Cmx0H/img.png)

ν΄λΌμ΄μ–ΈνΈ ν”„λ΅κ·Έλ¨ λ‚΄λ¶€μ—μ„ μ΄λ™ν•κ³ μ ν•λ” λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ£Όμ† κ°’μ„ μ§μ ‘ κ΄€λ¦¬λ¥Ό ν•λ” κµ¬μ΅°λ‹¤.

Client Side Load Balancer μ¥μ μΌλ΅λ” IPν•κ³ , ν¬νΈ λ²νΈλ¥Ό λ…μ‹ν•λ” λ°©μ‹μ΄ μ•„λ‹ κ·Έλƒ¥ λ‹¨μν μ„λΉ„μ¤μ μ΄λ¦„λ§ κ°–κ³  νΈμ¶μ΄ κ°€λ¥ν•λ‹¤λ” μ¥μ μ΄ μλ‹¤.

## Netflix Zuul

`Netflix Zuul`μ€ λ°©κΈ μ „ ν™•μΈν–λ Gatewayμ„ λ‹΄λ‹Ήν•΄μ£Όλ” μ ν’μ΄λ‹¤.

![](https://i.postimg.cc/WzfHJvYW/Zuul.jpg)

</div>
</details>

<details>
  <summary>part 2 / Netflix Zuul Test</summary>
  <div markdown="1"></div>

κ°„λ‹¨ν• λ‚΄μ©μ„ λ‹΄κ³ μλ” λ‘ κ°€μ§€μ μ„λΉ„μ¤λ¥Ό λ§λ“¤μ–΄ Zullμ΄λΌλ” Gatewayμ—μ„ λ‘ κ°€μ§€μ μ‚¬μ©μμ μ”μ²­μ΄ μ™”μ„ λ•, κ° μ„λΉ„μ¤λ΅ μ λ¶„μ‚°λλ”μ§€ ν™•μΈμ„ ν•  κ²ƒμ΄λ‹¤.

[Zuul](https://github.com/jae9380/MSA-SpringCloud/tree/main/zuul-service) 
[μ„λΉ„μ¤ 1](https://github.com/jae9380/MSA-SpringCloud/tree/main/first-service)
[μ„λΉ„μ¤ 2](https://github.com/jae9380/MSA-SpringCloud/tree/main/second-service)

μΌλ‹¨ κ° μ„λΉ„μ¤λ” κ° ν¬νΈμ— λ§λ” urlλ΅ μ ‘μ†μ„ ν•λ©΄ κ°„λ‹¨ν• λ¬Έκµ¬κ°€ μ¶λ ¥μ΄ λλ” μ„λΉ„μ¤λ΅ κµ¬μ„±
![](https://i.postimg.cc/MGngpjPj/2024-07-31-15-49-11.png)


λ‹¤μμΌλ΅ Zuul ν”„λ΅μ νΈ μƒμ„± 

ν•΄λ‹Ή ν”„λ΅μ νΈ λ©”μΈ νμΌμ— `@EnableZuulProxy`μ–΄λ…Έν…μ΄μ… μ„¤μ •     
(ν•΄λ‹Ή μ–΄λ…Έν…μ΄μ…μ„ μ„¤μ •μ„ ν•λ©΄ Zuul ν”„λ΅μ‹ μ„λ²„λ΅μ„μ λ™μ‘μ„ κ°€λ¥ν•κ² ν•λ‹¤.)

![](https://i.postimg.cc/8zPqxYL4/2024-07-31-15-56-07.png)
μ„ μ²λΌ ymlνμΌμ— μ—°κ²°ν•  μ„λΉ„μ¤μ μ΄λ¦„κ³Ό ν•΄λ‹Ή μ„λΉ„μ¤μ path, urlμ„ μ„¤μ •μ„ ν•κ³  μ¤„ μ„λΉ„μ¤λ΅ κ° μ„λΉ„μ¤λ΅ μ ‘κ·Όμ„ ν•΄λ³΄μ   

![](https://i.postimg.cc/FKkn4Xzy/2024-07-31-15-59-18.png)   
κ·Έλ¬λ©΄ μ΄ μ²λΌ λ¬Έκµ¬κ°€ μ λ‚νƒ€λ‚λ‹¤.

μ΄λ ‡κ² κ°„λ‹¨ν• μμ λ¥Ό μ‚¬μ©ν•μ—¬ API Gateway λΌμ°ν… κΈ°λ¥μ„ ν™•μΈν–λ‹¤.
</details>

<details>
  <summary>part 3 / Logging filter</summary>
  <div markdown="1"></div>

  Zull fliterλ¥Ό μ‚¬μ©ν•κΈ° μ„ν•΄μ„ μ¶”μƒν΄λμ¤ ZullFilerλ¥Ό μƒμ† λ°›κ³  μ¶”μƒ λ©”μ†λ“λ¥Ό μ •μν•μ—¬ μ”μ²­λ  λ• λ΅κ·Έλ¥Ό λ‚¨κΈ°κ² ν•  κ²ƒμ΄λ‹¤.
  ![](https://i.postimg.cc/tC2X1W5r/2024-07-31-16-20-22.png)

  κ·Έλ¬λ©΄ κ° λ©”μ†λ“λ” μ–΄λ–¤ κΈ°λ¥μ„ ν•κ³  μ–΄λ–»κ² μ„¤μ •ν•λ”μ§€μ— λ€ν•μ—¬ μ•μ•„λ³΄κ² λ‹¤.

  * boolean shouldFilter()   
  ν•΄λ‹Ή λ©”μ†λ“λ” ν•„ν„°μ μ‹¤ν–‰ μ—¬λ¶€λ¥Ό κ²°μ •ν•λ” λ©”μ†λ“μ΄λ‹¤.   
  
  * Object run()   
  ν•„ν„°μ μ£Όμ”ν• λ΅μ§μ„ κµ¬μ„±ν•λ” λ©”μ†λ“μ΄λ‹¤.    
  μ£Όλ΅ μ”μ²­μ„ λ³€κ²½ν•κ±°λ‚, λ΅κ·Έλ¥Ό λ‚¨κΈ°κ±°λ‚, μ‘λ‹µμ„ μ΅°μ‘ν•  λ• μ‚¬μ©μ„ ν•λ‹¤.

  * String filterType()   
  ν•„ν„°μ νƒ€μ…μ„ μ§€μ •ν•λ‹¤. ν•„ν„°κ°€ μ–΄λ–¤ νƒ€μ…μ„ κ°–λ”λƒμ— λ”°λΌ μ–Έμ  μ‹¤ν–‰λ μ§€ κ²°μ •ν•λ‹¤.   

    ν•„ν„° νƒ€μ…μ μμ 
    * pre : λΌμ°ν… μ „μ— μ‹¤ν–‰
    * routing : μ‹¤μ  λΌμ°ν…μ„ μν–‰ν•  λ• μ‹¤ν–‰
    * post : λΌμ°ν… ν›„μ— μ‹¤ν–‰
    * error : μ¤λ¥κ°€ λ°μƒν–μ„ λ• μ‹¤ν–‰

  * int filterOrder()   
    μ—¬λ¬κ°μ ν•„ν„°κ°€ μ΅΄μ¬ν•  κ²½μ°, ν•„ν„°μ μ‹¤ν–‰ μμ„λ¥Ό μ§€μ •ν•λ‹¤.

</details>

<details>
  <summary>part 4 / Spring Cloud API-Gateway test</summary>
  <div markdown="1"></div>

  κΈ°μ΅΄μ—λ” Tomcatμ΄λΌλ” μ„λ²„κ°€ μ‘λ™λμ—μ„ κ²ƒμ΄λ‹¤. ν•μ§€λ§ μ΄λ²μ—λ” Nettyμ„λ²„κ°€ λ™μ‘μ„ ν•λ‹¤.   
  Zuulμ—μ„λ” λ™κΈ° λ°©μ‹μΈ Tomcat μ„λ²„λ¥Ό μ‚¬μ©μ„ ν–μ§€λ§, Spring Cloud API-Gatewayλ¥Ό μ‚¬μ©ν•λ©΄ λΉ„λ™κΈ° λ°©μ‹μΈ Nettyκ°€ μ‘λ™μ„ ν•λ‹¤.

  ![](https://i.postimg.cc/jdDQDQ6c/2024-07-31-16-50-50.png)

</details>


<details>
  <summary>part 5 / Spring Cloud Gateway Filter</summary>
  <div markdown="1"></div>
  Gatewayμ—μ„μ Filterλ” μ–΄λ–»κ² λ™μ‘μ΄ λλ”μ§€ ν™•μΈν•κ² λ‹¤.   

  ![](https://i.postimg.cc/DwkFWh4z/Filter.png)

  ν΄λΌμ΄μ–ΈνΈκ°€ Gatewayμ—κ² μ”μ²­μ„ μ „λ‹¬ν•λ©΄, Gatewayμ—μ„ μ–΄λ–¤ μ„λΉ„μ¤λ΅ μ΄λ™μ„ ν•  κ²ƒμΈκ°€ νλ‹¨μ„ ν•κ³  μ΄λ™μ„ ν•λ‹¤.

   
</details>

<details>
  <summary>part 6 / Gateway Filter Routing configuration in JAVA code</summary>
  <div markdown="1"></div>

 apigateway-serviceνμΌ λ‚΄ ymlνμΌμ—μ„ cloud κ΄€λ ¨ μ„¤μ •μ„ μ£Όμ„ μ²λ¦¬ ν›„ μλ°” νμΌ λ‚΄λ¶€μ—μ„ μ΄λ¥Ό μ„¤μ •μ„ ν•  κ²ƒμ΄λ‹¤.

![](https://i.postimg.cc/0NvDVyZ3/2024-08-01-20-32-47.png)

μ„μ½”λ“μ—μ„ `r.path` λ¶€λ¶„μ κ°’μ μ”μ²­μ΄ λ“¤μ–΄μ¤λ©΄ `uri`λ¶€λ¶„μΌλ΅ μ΄λ™μ„ ν•λ‹¤.   
κ·Έλ¦¬κ³  ν•„ν„° λ¶€λ¶„μ—μ„  μ”μ²­κ³Ό, μ‘λ‹µμΌλ΅ λ‘ κ°€μ§€λ΅ λ“±λ΅μ„ ν•  μ μλ‹¤.   
ν—¤λ” λ¶€λ¶„μ— μ–΄λ– ν• κ°’μ„ μ €μ¥ν• λ ¤κ³  ν•λ©΄ `K-V`ν•νƒλ΅ μ €μ¥μ„ ν•λ©΄ λλ‹¤.  

( μ„ μ½”λ“μ—μ„ `.addRequestHeader`κ°€ μ¤‘λ³µλμ–΄ μλ”λ° μ•„λμ μ½”λ“λ¥Ό `.addResponseHeader`λ΅ μμ •)

![](https://i.postimg.cc/VLSq6Td7/2024-08-01-20-32-06.png)

μ΄μ  μ¶λ ¥μ΄ μ λλ”μ§€ ν™•μΈμ„ ν•λ©΄ 
![](https://i.postimg.cc/8zZfmmJF/2024-08-01-20-39-37.png)
![](https://i.postimg.cc/7LcCpPNw/2024-08-01-20-43-53.png)
Request Headerμ™€ Response Headerκ°€ μ λ‚νƒ€λ‚λ‹¤.

</details>

<details>
  <summary>part 7 / configuration in Yml file</summary>
  <div markdown="1"></div>

μ €λ² λ‹¨κ³„μ—μ„ μλ°” μ½”λ“λ΅ μ‘μ„±ν• λ‚΄μ©μ„ λ‹¤μ‹ ymlνμΌμ—μ„ μ„¤μ •μ„ ν•κΈ° μ„ν•΄μ„ κΈ°μ΅΄μ— μ‘μ„±ν• JAVAμ½”λ“λ” μ£Όμ„μ²λ¦¬ ν›„, ymlνμΌμ—μ„ μ£Όμ„μ„ ν•΄μ λ¥Ό ν•λ‹¤.   
κ·Έλ¦¬κ³  μ¶”κ°€μ μΈ Fliterλ¥Ό μ„¤μ •ν•κΈ° μ„ν•΄μ„ 
μ „ λ‹¨κ²μ—μ„ μ‘μ„±ν• Fliter ν΄λμ¤μ— λ‚΄μ© μ£Όμ„ μ²λ¦¬ κ·Έλ¦¬κ³  yml λ‚΄μ© μ£Όμ„ ν•΄μ  ν›„ 
```yaml
filters:
  - AddRequestHeader = first-request, first-request-header2
  - AddResponseHeader = first-response, first-response-header2
```
μ¶”κ°€ μ‘μ„±μ„ ν•κ³  PostmanμΌλ΅ ν…μ¤νΈλ¥Ό ν•λ©΄    
![](https://i.postimg.cc/6qS0RWf3/2024-08-02-16-31-03.png)
headerκ°’μ΄ μ λ‚νƒ€λ‚λ” κ²ƒμ„ ν™•μΈ κ°€λ¥ν•λ‹¤.


</details>

_ν† κΈ€_

```html
<details>
  <summary>part</summary>
  <div markdown="1"></div>
</details>
```
